<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Grocery Planner ChatBot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 500px;
            height: 600px;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px 10px 0 0;
            text-align: center;
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .header p {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .chat-box {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .message {
            margin-bottom: 15px;
            display: flex;
            animation: slideIn 0.3s ease-in-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message.bot {
            justify-content: flex-start;
        }
        
        .message.user {
            justify-content: flex-end;
        }
        
        .message-content {
            max-width: 70%;
            padding: 12px 15px;
            border-radius: 15px;
            font-size: 14px;
            line-height: 1.4;
            word-wrap: break-word;
        }
        
        .bot .message-content {
            background: #e0e0e0;
            color: #333;
            border-bottom-left-radius: 0;
        }
        
        .user .message-content {
            background: #667eea;
            color: white;
            border-bottom-right-radius: 0;
        }
        
        .input-area {
            padding: 15px;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 10px;
        }
        
        #userInput {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
        }
        
        #userInput:focus {
            border-color: #667eea;
        }
        
        button {
            padding: 12px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ›’ Budget Grocery Planner</h1>
            <p>Your AI assistant for smart grocery shopping</p>
        </div>
        
        <div class="chat-box" id="chatBox">
            <div class="message bot">
                <div class="message-content">
                    Hi! ðŸ‘‹ I'm your Budget Grocery Planner. I can help you plan your grocery shopping within your budget. Tell me:
                    <br>- Your budget amount
                    <br>- Number of people to feed
                    <br>- Any dietary preferences or restrictions
                </div>
            </div>
        </div>
        
        <div class="input-area">
            <input 
                type="text" 
                id="userInput" 
                placeholder="Type your message..." 
                autocomplete="off"
            >
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        // Sample grocery data with prices
        const groceryData = {
            vegetables: { carrot: 1.5, onion: 0.8, tomato: 2, potato: 1, broccoli: 3 },
            fruits: { apple: 2.5, banana: 1.2, orange: 2, mango: 3.5 },
            dairy: { milk: 3.5, cheese: 5, yogurt: 2.5, butter: 4 },
            proteins: { chicken: 8, rice: 2.5, beans: 1.8, lentils: 2, eggs: 4.5 },
            pantry: { oil: 5, salt: 1, sugar: 3, flour: 2.5, bread: 2 }
        };

        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');
        let userBudget = 0;
        let peopleToFeed = 1;
        let conversationStage = 'greeting';

        function sendMessage() {
            const message = userInput.value.trim();
            if (message === '') return;

            addMessage(message, 'user');
            userInput.value = '';
            userInput.focus();

            setTimeout(() => {
                const response = generateResponse(message);
                addMessage(response, 'bot');
            }, 500);
        }

        function addMessage(content, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = content;
            
            messageDiv.appendChild(contentDiv);
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function generateResponse(userMessage) {
            const message = userMessage.toLowerCase();

            if (conversationStage === 'greeting') {
                if (message.match(/\d+/)) {
                    userBudget = parseInt(message.match(/\d+/)[0]);
                    conversationStage = 'people';
                    return `Great! You have a budget of â‚¹${userBudget}. How many people are you planning to feed?`;
                }
                return "I didn't catch a budget amount. Please tell me your budget (e.g., '50' for $50).";
            }

            if (conversationStage === 'people') {
                if (message.match(/\d+/)) {
                    peopleToFeed = parseInt(message.match(/\d+/)[0]);
                    conversationStage = 'planning';
                    return `Perfect! Feeding ${peopleToFeed} people with â‚¹${userBudget}. That's about â‚¹${(userBudget / peopleToFeed).toFixed(2)} per person. What type of meals would you like to plan?`;
                }
                return "Please tell me how many people you're feeding (e.g., '4').";
            }

            if (conversationStage === 'planning') {
                if (message.includes('recommend') || message.includes('suggest') || message.includes('plan')) {
                    const mealPlan = generateMealPlan();
                    return mealPlan;
                }
                if (message.includes('vegetable') || message.includes('fruit') || message.includes('protein') || message.includes('dairy')) {
                    return getSuggestions(message);
                }
                return "I can help you plan meals! Ask me to 'recommend' items, or ask about specific food categories like vegetables, proteins, dairy, or fruits.";
            }

            return "I'm here to help with your grocery budget! What would you like to know?";
        }

        function generateMealPlan() {
            const budgetPerPerson = (userBudget / peopleToFeed).toFixed(2);
            const suggestions = [
                `ðŸ“‹ Budget Meal Plan:`,
                `Per Person Budget: â‚¹${budgetPerPerson}`,
                `Total People: ${peopleToFeed}`,
                `Total Budget: â‚¹${userBudget}`,
                ``,
                `Suggested Shopping List:`,
                `ðŸ¥• Vegetables: Carrots, Onions, Potatoes, Tomatoes`,
                `ðŸŽ Fruits: Bananas, Apples`,
                `ðŸ¥› Dairy: Milk, Yogurt`,
                `ðŸ— Proteins: Lentils, Beans, Rice`,
                `ðŸž Pantry: Bread, Oil, Salt`,
                ``,
                `Estimated Cost: ~â‚¹${userBudget}`,
                `This plan includes balanced nutrition for ${peopleToFeed} people!`
            ];
            return suggestions.join('\n');
        }

        function getSuggestions(category) {
            let items = [];
            if (category.includes('vegetable')) {
                items = Object.entries(groceryData.vegetables).map(([item, price]) => `${item}: $${price}`);
            } else if (category.includes('fruit')) {
                items = Object.entries(groceryData.fruits).map(([item, price]) => `${item}: $${price}`);
            } else if (category.includes('protein')) {
                items = Object.entries(groceryData.proteins).map(([item, price]) => `${item}: $${price}`);
            } else if (category.includes('dairy')) {
                items = Object.entries(groceryData.dairy).map(([item, price]) => `${item}: $${price}`);
            }
            
            return `Here are budget-friendly options:\n${items.join('\n')}`;
        }

        // Allow Enter key to send messages
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>
